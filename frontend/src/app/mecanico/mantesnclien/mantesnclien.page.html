<ion-header>
  <ion-icon name="arrow-back-outline" class="back-button" fill="clear" (click)="goBack()"></ion-icon>
  <ion-title class="title">Mantenimientos del Usuario</ion-title>
  <br><br>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-searchbar (ionInput)="filterMaintenances($event)" placeholder="Buscar mantenimiento..." showClearButton="focus"></ion-searchbar>

  <ion-card 
    class="maintenance-card" 
    *ngFor="let maintenance of filteredMaintenances" 
    (click)="saveMaintenanceIdAndNavigate(maintenance.id)"> <!-- Cambiado aquí -->

    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-label>
            <h3>{{ maintenance.name || 'Mantenimiento sin título' }}</h3>
            <p>{{ formatDate(maintenance.date).date }} {{ formatDate(maintenance.date).time }}</p>
            <p>Estado: 
              <ion-icon [name]="getStatusLabel(maintenance.status_id).icon" [color]="getStatusLabel(maintenance.status_id).color"></ion-icon> 
              {{ getStatusLabel(maintenance.status_id).label }}
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

</ion-content>

<ion-footer>
  <div class="button-container">
    <ion-button class="custom-button" expand="block" routerLink="/mecanico/home-mecanico">
      <ion-icon slot="start" name="home"></ion-icon> Inicio
    </ion-button>
    <ion-button class="custom-button" expand="block" routerLink="/mecanico/register-user">
      <ion-icon slot="start" name="person"></ion-icon> Agregar Perfil
    </ion-button>
  </div>
</ion-footer>
