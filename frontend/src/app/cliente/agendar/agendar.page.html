<ion-header>
  <ion-toolbar>
    <ion-icon
      name="arrow-back-outline"
      class="back-button"
      (click)="goBack()"
    ></ion-icon>
    <ion-title class="title">Agendar Cita</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding-vertical">
  <form (ngSubmit)="onSubmit()" [formGroup]="formGroup">
    <h3 class="title">Seleciona a un mecánico:</h3>
    <ion-card >
      <ion-list lines="none">
        <ion-item>
          <ion-select label="Mecánico" label-placement="stacked" formControlName="mechanicId">
            <ion-select-option *ngFor="let item of mechanics" value="{{item.id}}">{{item.name}} {{item.lastname}}</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item *ngIf="isMechanicSelected" lines="none" >
          <ion-label class="mechanic-details">
            <p><strong>Nombre:</strong> {{ mechanicSelected.name }} {{ mechanicSelected.lastname }}</p>
            <p><strong>Correo:</strong> {{ mechanicSelected.email }}</p>
            <p><strong>Teléfono:</strong> {{ mechanicSelected.phone }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card>
    <!-- this is the card to data of the carSelected -->
    <h3 class="title">Datos del vehículo:</h3>
    <ion-card class="car-container welcome-container">
      <div class="ion-padding car-container__section">
        <ion-label>
          <ion-label class="mechanic__data">
            <p>
              <span class="mechanic__data_title">Patente:</span> {{
              carSelected?.patente }}
            </p>
            <p>
              <span class="mechanic__data_title">Marca:</span> {{
              carSelected?.marca }}
            </p>
            <p>
              <span class="mechanic__data_title">Modelo:</span> {{
              carSelected?.modelo }}
            </p>
            <p>
              <span class="mechanic__data_title">Año:</span> {{
              carSelected?.year }}
            </p>
          </ion-label>
        </ion-label>
      </div>
    </ion-card>
    <h3 class="title">Tipo de servicio:</h3>
    <ion-card>

        <ion-item>
          <ion-select label="Tipos de servicios" label-placement="stacked" formControlName="typeOfServiceId">
            <ion-select-option *ngFor="let item of typesServices" value="{{item.id}}">{{item.name}}</ion-select-option>
          </ion-select>
        </ion-item>  

    </ion-card>
    <h3 class="title">Horario recomendado:</h3>
    <ion-item
      class="ion-justify-content-center ion-align-items-center ion-padding"
    >
      <ion-datetime class="ion-justify-content-center ion-align-items-center ion-padding"
        formControlName="schedule"
        [isDateEnabled]="isWeekday"
        locale="es-CL"
        minuteValues="0,15,30,45"
        hourValues="8,9,10,11,12,13,14,15,16,17,18"
        hourCycle="h24"
        class="ion-datetime-button-overlay"
      ></ion-datetime>
    </ion-item>
    <ion-button expand="full" type="submit" [disabled]="!formGroup.valid">Agendar</ion-button>
  </form>
</ion-content>
<ion-footer>

</ion-footer>
