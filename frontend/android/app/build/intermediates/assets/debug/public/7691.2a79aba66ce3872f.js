"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7691],{7691:(M,f,s)=>{s.r(f),s.d(f,{InicioSesionPageModule:()=>b});var p=s(177),i=s(4341),t=s(4742),g=s(8986),m=s(467),n=s(3953),C=s(9885),h=s(3656);const F=[{path:"",component:(()=>{var e;class a{constructor(o,r,c,l){this.fb=o,this.userService=r,this.navCtrl=c,this.alertController=l}ngOnInit(){this.loginForm=this.fb.group({email:["",[i.k0.required,i.k0.email]],password:["",[i.k0.required]]}),this.checkIfAuthenticated()}onSubmit(){var o=this;return(0,m.A)(function*(){if(o.loginForm.valid){const{email:r,password:c}=o.loginForm.value;try{const l=yield o.userService.login({email:r,password:c});console.log("Inicio de sesi\xf3n exitoso:",l);const d=l.data.user.roles;console.log("Roles del usuario:",d),d.includes("MECHANIC_USER")?o.navCtrl.navigateForward("/mecanico/home-mecanico"):d.includes("CUSTOMER_USER")?o.navCtrl.navigateForward("/cliente/home-cliente"):o.presentAlert("Error de rol","Rol desconocido.")}catch(l){console.error("Error de inicio de sesi\xf3n:",l),o.presentAlert("Error de inicio de sesi\xf3n","Correo o contrase\xf1a incorrectos")}}})()}presentAlert(o,r){var c=this;return(0,m.A)(function*(){yield(yield c.alertController.create({header:o,message:r,buttons:["OK"]})).present()})()}checkIfAuthenticated(){var o=this;return(0,m.A)(function*(){const r=yield o.userService.getUserSession();if(r){const c=r.user.roles;console.log("Roles del usuario autenticado:",c),c.includes("MECHANIC_USER")?o.navCtrl.navigateForward("/mecanico/home-mecanico"):c.includes("CUSTOMER_USER")?o.navCtrl.navigateForward("/cliente/home-cliente"):o.presentAlert("Error de rol","Rol desconocido.")}else console.log("Usuario no autenticado.")})()}}return(e=a).\u0275fac=function(o){return new(o||e)(n.rXU(i.ok),n.rXU(C.D),n.rXU(h.q9),n.rXU(t.hG))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-inicio-sesion"]],decls:31,vars:1,consts:[[1,"ion-padding"],["fill","clear","a","","routerLink","/bienvenidos",1,"back-button"],["name","arrow-back-outline"],[1,"title"],[1,"login-form",3,"ngSubmit","formGroup"],["position","stacked"],[1,"input-item"],["type","email","formControlName","email"],["type","password","formControlName","password"],["type","submit"],[1,"line2"],["color","light",1,"google-btn"],["src","assets/icono-google.svg","alt","Google Icon",1,"google-icon"],["routerLink","/recuperar-contrasena"],[1,"line1"],[1,"final"]],template:function(o,r){1&o&&(n.j41(0,"ion-content",0)(1,"ion-button",1),n.nrm(2,"ion-icon",2),n.k0s(),n.nrm(3,"br")(4,"br"),n.j41(5,"h1",3),n.EFF(6,"Iniciar sesi\xf3n"),n.k0s(),n.j41(7,"form",4),n.bIt("ngSubmit",function(){return r.onSubmit()}),n.j41(8,"ion-label",5),n.EFF(9,"Correo electr\xf3nico:"),n.k0s(),n.j41(10,"ion-item",6),n.nrm(11,"ion-input",7),n.k0s(),n.nrm(12,"p"),n.j41(13,"ion-label",5),n.EFF(14,"Contrase\xf1a:"),n.k0s(),n.j41(15,"ion-item",6),n.nrm(16,"ion-input",8),n.k0s(),n.j41(17,"ion-button",9),n.EFF(18,"Iniciar sesi\xf3n"),n.k0s(),n.j41(19,"h2",10),n.EFF(20,"\u2014\u2014\u2014\u2014\u2014 O \u2014\u2014\u2014\u2014\u2014"),n.k0s(),n.j41(21,"ion-button",11),n.nrm(22,"img",12),n.EFF(23," Iniciar sesi\xf3n con Google "),n.k0s(),n.j41(24,"ion-text")(25,"a",13),n.EFF(26,"\xbfHas olvidado tu contrase\xf1a?"),n.k0s()()()(),n.j41(27,"ion-text",14),n.EFF(28,"__________________"),n.k0s(),n.j41(29,"h2",15),n.EFF(30,"AutoMinder"),n.k0s()),2&o&&(n.R7$(7),n.Y8G("formGroup",r.loginForm))},dependencies:[i.qT,i.BC,i.cb,t.Jm,t.W9,t.iq,t.$w,t.uz,t.he,t.IO,t.Gw,t.N7,t.oY,g.Wk,i.j4,i.JD],styles:["ion-content[_ngcontent-%COMP%]{background-color:#0d1117;height:100vh;display:flex;justify-content:center;align-items:center;position:relative}.back-button[_ngcontent-%COMP%]{position:absolute;top:20px;left:1px;color:#fff;padding:0;border:none}ion-icon[_ngcontent-%COMP%]{font-size:2rem}.title[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;text-decoration-line:underline;text-align:center;margin-top:2rem;margin-bottom:4rem}.line1[_ngcontent-%COMP%]{text-align:center;color:#3032a3}.line2[_ngcontent-%COMP%]{text-align:center;top:2px}.final[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;text-align:center;margin-bottom:1.5rem}.login-form[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-top:1px;color:#fff}.login-form[_ngcontent-%COMP%]   .input-item[_ngcontent-%COMP%]{--background: #FFFFFF;border-radius:8px;margin-bottom:1.5rem;--color: black}.login-form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #6366F1;color:#fff;font-size:1rem;border-radius:5px;padding:10px;margin:1rem auto;display:block;width:70%}.login-form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   .google-btn[_ngcontent-%COMP%]{color:#000;font-size:1rem;border-radius:5px;padding:10px;margin:1rem auto;display:block;justify-content:center;align-items:center;width:350px}.login-form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   img.google-icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:8px}.login-form[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:10px}.login-form[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#33f;text-decoration:none;font-size:.9rem}"]}),a})()}];let P=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[g.iI.forChild(F),g.iI]}),a})(),b=(()=>{var e;class a{}return(e=a).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[p.MD,i.YN,t.bv,P,i.X1]}),a})()}}]);