"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7185],{7185:(j,f,i)=>{i.r(f),i.d(f,{RegisterUserPageModule:()=>b});var h=i(177),o=i(4341),n=i(4742),p=i(8986),v=i(467),F=i(1626),e=i(3953),R=i(9885),U=i(3656),k=i(369);const C=[{path:"",component:(()=>{var t;class l{constructor(r,a,u,c,d){this.formBuilder=r,this.userService=a,this.navCtrl=u,this.alertController=c,this.storageService=d}goBack(){this.navCtrl.back()}ngOnInit(){this.registerForm=this.formBuilder.group({email:["",[o.k0.required,o.k0.email]],name:["",o.k0.required],lastname:["",o.k0.required],rut:["",o.k0.required],phone:["",[o.k0.required]]})}onSubmit(){var r=this;return(0,v.A)(function*(){if(r.registerForm.valid){const{email:a,name:u,lastname:c,rut:d,phone:E}=r.registerForm.value;try{const s=yield r.userService.register({email:a,name:u,lastname:c,rut:d,phone:E});if(console.log("Registro exitoso:",s),!0===s.success){let g=s.data;yield r.storageService.set("token",g.access_token),r.navCtrl.navigateForward("mecanico/agregar-vehiculo")}else yield r.presentAlert("Error de registro",s.message||"No se pudo completar el registro.")}catch(s){console.error("Error en el registro:",s);let g="Error al crear Cliente";s instanceof F.yz&&(404===s.status?g="Endpoint no encontrado. Verifica la URL del servidor.":s.error&&s.error.message&&(g=s.error.message)),r.presentAlert("Error de registro",g)}}else r.presentAlert("Formulario inv\xe1lido","Por favor, completa todos los campos requeridos.")})()}presentAlert(r,a){var u=this;return(0,v.A)(function*(){yield(yield u.alertController.create({header:r,message:a,buttons:["OK"]})).present()})()}}return(t=l).\u0275fac=function(r){return new(r||t)(e.rXU(o.ok),e.rXU(R.D),e.rXU(U.q9),e.rXU(n.hG),e.rXU(k.w))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-register-user"]],decls:35,vars:1,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","email","type","email"],["formControlName","name"],["formControlName","lastname"],["formControlName","rut"],["formControlName","phone"],["expand","full","type","submit"]],template:function(r,a){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return a.goBack()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Registrar cliente"),e.k0s()()(),e.j41(7,"ion-content")(8,"form",3),e.bIt("ngSubmit",function(){return a.onSubmit()}),e.j41(9,"ion-item")(10,"ion-label",4),e.EFF(11,"Correo electr\xf3nico"),e.k0s(),e.nrm(12,"ion-input",5),e.k0s(),e.j41(13,"ion-item")(14,"ion-label",4),e.EFF(15,"Nombre de usuario"),e.k0s(),e.nrm(16,"ion-input",6),e.k0s(),e.j41(17,"ion-item")(18,"ion-label",4),e.EFF(19,"Apellido de usuario"),e.k0s(),e.nrm(20,"ion-input",7),e.k0s(),e.j41(21,"ion-item")(22,"ion-label",4),e.EFF(23,"Rut"),e.k0s(),e.nrm(24,"ion-input",8),e.k0s(),e.j41(25,"ion-item")(26,"ion-label",4),e.EFF(27,"N\xfamero de tel\xe9fono"),e.k0s(),e.nrm(28,"ion-input",9),e.k0s(),e.j41(29,"ion-button",10),e.EFF(30,"Crear cuenta"),e.k0s()()(),e.j41(31,"ion-footer")(32,"ion-toolbar")(33,"ion-title"),e.EFF(34,"AutoMinder"),e.k0s()()()),2&r&&(e.R7$(8),e.Y8G("formGroup",a.registerForm))},dependencies:[o.qT,o.BC,o.cb,n.Jm,n.QW,n.W9,n.M0,n.eU,n.iq,n.$w,n.uz,n.he,n.BC,n.ai,n.Gw,o.j4,o.JD]}),l})()}];let P=(()=>{var t;class l{}return(t=l).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(C),p.iI]}),l})();var y=i(5553);let b=(()=>{var t;class l{}return(t=l).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.MD,o.YN,n.bv,P,y.h,o.X1]}),l})()}}]);